<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>INFEKSI-0</title>

<style>
body {
  background: #0b0b0b;
  color: #e0e0e0;
  font-family: Arial, sans-serif;
  margin: 0;
  padding: 0;
}

/* WRAPPER UTAMA */
.app {
  min-height: 100vh;
  width: 100%;
  max-width: 360px;
  margin: auto;

  display: flex;
  flex-direction: column;
  justify-content: center; /* tengah vertikal */
  align-items: center;     /* tengah horizontal */

  padding: 12px;
  box-sizing: border-box;
  text-align: center;
}

/* ================= DESKTOP ================= */
h1 { color: crimson; }

button {
  padding: 12px 24px;
  font-size: 18px;
  cursor: pointer;
  background: crimson;
  border: none;
  color: white;
  border-radius: 6px;
  margin: 8px 0;
}

button.secondary { background: #444; }

button:disabled {
  background: #555;
  cursor: not-allowed;
}

.menu, .game, .rulebook, .choose {
  display: none;
  width: 100%;
}

.counter {
  font-size: 64px;
  margin: 16px 0;
  color: #ff4444;
}

.result img {
  max-width: 220px;
  margin-top: 16px;
  filter: drop-shadow(0 0 15px black);
}

.log {
  margin-top: 16px;
  background: #111;
  padding: 12px;
  border-radius: 8px;
  font-size: 14px;
  max-height: 180px;
  overflow-y: auto;
  text-align: left;
}

/* ================= HP 9:16 ================= */
@media (max-width: 480px) {

  h1 {
    font-size: 28px;
    margin-bottom: 12px;
  }

  h2 {
    font-size: 22px;
  }

  button {
    width: 100%;
    font-size: 18px;
    padding: 14px;
  }

  .counter {
    font-size: 80px;
  }

  .choose img,
  .result img,
  .rulebook img {
    width: 100%;
    max-width: 220px;
    height: auto;
    display: block;
    margin: auto;
  }
}

/* ================= FIX GAMBAR KEGEDEAN ================= */

/* PILIH KARAKTER */
.choose button {
  background: none;
  padding: 6px;
}

.choose img {
  max-width: 160px;
  width: 100%;
  height: auto;
}

/* HASIL MENANG / KALAH */
.result img {
  max-width: 180px;
  width: 100%;
  height: auto;
  filter: drop-shadow(0 0 15px black);
}

/* RULEBOOK */
.rulebook img {
  max-width: 180px;
  width: 100%;
  height: auto;
}

/* IMAGE DI DALAM BUTTON */
button img {
  display: block;
  margin: auto;
}

/* ================= HP 9:16 ================= */
@media (max-width: 480px) {
  .choose img,
  .result img,
  .rulebook img {
    max-width: 140px;
  }
}

</style>
</head>

<body>

<div class="app">

<h1>ü¶† INFEKSI-0</h1>

<!-- MENU -->
<div class="menu" id="menu" style="display:block">
  <button onclick="openRulebook()">üìñ Rulebook</button>
  <button onclick="openChoose()">üéÆ Play Game</button>
</div>

<!-- PILIH INFEKSI -->
<div class="choose" id="choose">
  <h2>Pilih Jenis Infeksi</h2>

  <button onclick="selectInfection('cacing')">
    <img src="cacingm.png">
  </button>

  <button onclick="selectInfection('tikus')">
    <img src="tikusm.png">
  </button>

  <button class="secondary" onclick="backToMenu()">‚¨Ö Kembali</button>
</div>

<!-- RULEBOOK -->
<div class="rulebook" id="rulebook">
  <h2>üìñ Rulebook</h2>
  <img src="rulebook.png">
  <button class="secondary" onclick="backToMenu()">‚¨Ö Kembali</button>
</div>

<!-- GAME -->
<div class="game" id="game">
  <p>Tekan infeksi ke <b>0</b> sebelum mencapai <b>10</b></p>

  <div class="counter" id="infection">5</div>
  <div class="result" id="result"></div>

  <button id="rollBtn">Giliran Manusia üé≤</button>
  <button class="secondary" onclick="backToMenu()">‚¨Ö Menu</button>

  <div class="log" id="log">
    <b>Log:</b><br>
    Infeksi dimulai di 5<br>
  </div>
</div>

</div>

<script>
let infection = 5;
let selectedInfection = "cacing";

const infectionDiv = document.getElementById("infection");
const logDiv = document.getElementById("log");
const rollBtn = document.getElementById("rollBtn");
const resultDiv = document.getElementById("result");

const menu = document.getElementById("menu");
const game = document.getElementById("game");
const rulebook = document.getElementById("rulebook");
const choose = document.getElementById("choose");

function openRulebook() {
  hideAll();
  rulebook.style.display = "block";
}

function openChoose() {
  hideAll();
  choose.style.display = "block";
}

function selectInfection(type) {
  selectedInfection = type;
  hideAll();
  game.style.display = "block";
  resetGame();
}

function backToMenu() {
  hideAll();
  menu.style.display = "block";
}

function hideAll() {
  menu.style.display = "none";
  game.style.display = "none";
  rulebook.style.display = "none";
  choose.style.display = "none";
}

function resetGame() {
  infection = 5;
  rollBtn.disabled = false;
  infectionDiv.textContent = infection;
  logDiv.innerHTML = "<b>Log:</b><br>Infeksi dimulai di 5<br>";
  resultDiv.innerHTML = "";
}

function rollDice() {
  return Math.floor(Math.random() * 6) + 1;
}

function moveValue(d) {
  if (d <= 3) return 0;
  if (d === 4) return 1;
  if (d === 5) return 2;
  return 3;
}

function addLog(text) {
  logDiv.innerHTML += text + "<br>";
  logDiv.scrollTop = logDiv.scrollHeight;
}

function checkGameEnd() {
  if (infection <= 0) {
    infection = 0;
    infectionDiv.textContent = infection;
    addLog("‚úÖ MANUSIA MENANG!");
    rollBtn.disabled = true;
    resultDiv.innerHTML = `<img src="${selectedInfection}k.png">`;
    return true;
  }
  if (infection >= 10) {
    infection = 10;
    infectionDiv.textContent = infection;
    addLog("‚ùå MANUSIA KALAH!");
    rollBtn.disabled = true;
    resultDiv.innerHTML = `<img src="${selectedInfection}m.png">`;
    return true;
  }
  return false;
}

rollBtn.onclick = () => {
  let dh = rollDice();
  infection -= moveValue(dh);
  addLog(`üé≤ Manusia ${dh}`);
  infectionDiv.textContent = infection;
  if (checkGameEnd()) return;

  let di = rollDice();
  infection += moveValue(di);
  addLog(`ü¶† Infeksi ${di}`);
  infectionDiv.textContent = infection;
  checkGameEnd();
};
</script>

</body>
</html>
